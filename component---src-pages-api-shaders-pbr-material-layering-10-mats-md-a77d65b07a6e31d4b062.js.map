{"version":3,"file":"component---src-pages-api-shaders-pbr-material-layering-10-mats-md-a77d65b07a6e31d4b062.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/api/shaders/pbr-material-layering-10-mats.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/painter-shader-api/painter-shader-api/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-0\"\n      }}>{` `}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-1\"\n      }}>{` `}</a></p>\n    <h1 {...{\n      \"id\": \"substance-3d-painter-material-layering-pbr-shader\"\n    }}>{`Substance 3D Painter Material Layering PBR shader`}</h1>\n    <p>{`Import from libraries.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`\n\n\n\n \n #define NB_MATERIALS 10\n #define NB_MASKS (NB_MATERIALS - 1)\n \n //: metadata {\n //: \"custom-ui\": \"material-layering/custom-ui.qml\"\n //: }\n \n //: materials [\n //: {\n //: \"id\": \"Material1\",\n //: \"label\": \"Material 1\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material2\",\n //: \"label\": \"Material 2\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material3\",\n //: \"label\": \"Material 3\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material4\",\n //: \"label\": \"Material 4\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material5\",\n //: \"label\": \"Material 5\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material6\",\n //: \"label\": \"Material 6\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material7\",\n //: \"label\": \"Material 7\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material8\",\n //: \"label\": \"Material 8\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material9\",\n //: \"label\": \"Material 9\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: },\n //: {\n //: \"id\": \"Material10\",\n //: \"label\": \"Material 10\",\n //: \"default\": \"\",\n //: \"size\": 1024,\n //: \"default_color\": [0.5, 0.5, 0.5]\n //: }\n //: ]\n \n \n //: stacks [\n //: {\n //: \"id\": \"Mask\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask2\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask3\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask4\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask5\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask6\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask7\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask8\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: },\n //: {\n //: \"id\": \"Mask9\",\n //: \"channels\":\n //: [\n //: {\"id\": \"blendingmask\"}\n //: ]\n //: }\n //: ]\n \n \n \n //: param custom { \"default\": false, \"label\": \"Debug Mode\" }\n uniform bool DebugMode;\n \n //: param custom {\n //: \"default\": 0,\n //: \"label\": \"Debug channel\",\n //: \"widget\": \"combobox\",\n //: \"values\": {\n //: \"BaseColor\": 0,\n //: \"Roughness\": 1,\n //: \"Metallic\": 2,\n //: \"Normal (Material)\": 3,\n //: \"Normal (Masks)\": 4,\n //: \"Normal (Combined)\": 5,\n //: \"Mask 1\": 6,\n //: \"Mask 2\": 7,\n //: \"Mask 3\": 8,\n //: \"Mask 4\": 9,\n //: \"Mask 5\": 10,\n //: \"Mask 6\": 11,\n //: \"Mask 7\": 12,\n //: \"Mask 8\": 13,\n //: \"Mask 9\": 14\n //: }\n //: }\n uniform int DebugChannel;\n \n \n //: param custom { \"default\": false, \"label\": \"Normal from Masks\" }\n uniform bool UseNormalFromMask;\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-2\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"channels-needed-for-metalrough-workflow-are-bound-here\"\n    }}>{`Channels needed for metal/rough workflow are bound here.`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param auto texture_normal;\n uniform sampler2D mesh_normal_texture;\n \n //: param custom { \"default\": 5, \"label\": \"Material 1 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 1\" }\n uniform float u_coords1;\n \n //: param custom { \"default\": 5, \"label\": \"Material 2 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 2\" }\n uniform float u_coords2;\n \n //: param custom { \"default\": 5, \"label\": \"Material 3 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 3\" }\n uniform float u_coords3;\n \n //: param custom { \"default\": 5, \"label\": \"Material 4 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 4\" }\n uniform float u_coords4;\n \n //: param custom { \"default\": 5, \"label\": \"Material 5 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 5\" }\n uniform float u_coords5;\n \n //: param custom { \"default\": 5, \"label\": \"Material 6 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 6\" }\n uniform float u_coords6;\n \n //: param custom { \"default\": 5, \"label\": \"Material 7 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 7\" }\n uniform float u_coords7;\n \n //: param custom { \"default\": 5, \"label\": \"Material 8 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 8\" }\n uniform float u_coords8;\n \n //: param custom { \"default\": 5, \"label\": \"Material 9 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 9\" }\n uniform float u_coords9;\n \n //: param custom { \"default\": 5, \"label\": \"Material 10 coords\", \"min\": 0.01, \"max\": 128.0, \"group\" : \"Material 10\" }\n uniform float u_coords10;\n \n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 1\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 1\" }\n uniform float normal_intensity1;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 2\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 2\" }\n uniform float normal_intensity2;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 3\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 3\" }\n uniform float normal_intensity3;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 4\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 4\" }\n uniform float normal_intensity4;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 5\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 5\" }\n uniform float normal_intensity5;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 6\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 6\" }\n uniform float normal_intensity6;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 7\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 7\" }\n uniform float normal_intensity7;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 8\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 8\" }\n uniform float normal_intensity8;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 9\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 9\" }\n uniform float normal_intensity9;\n \n //: param custom { \"default\": 1, \"label\": \"Normal Intensity 10\", \"min\": 0.0, \"max\": 1.0, \"group\" : \"Material 10\" }\n uniform float normal_intensity10;\n \n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 2\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 2\" }\n uniform float mask_normal_intensity1;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 3\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 3\" }\n uniform float mask_normal_intensity2;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 4\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 4\" }\n uniform float mask_normal_intensity3;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 5\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 5\" }\n uniform float mask_normal_intensity4;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 6\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 6\" }\n uniform float mask_normal_intensity5;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 7\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 7\" }\n uniform float mask_normal_intensity6;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 8\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 8\" }\n uniform float mask_normal_intensity7;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 9\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 9\" }\n uniform float mask_normal_intensity8;\n \n //: param custom { \"default\": 0, \"label\": \"Normal from Mask Intensity 10\", \"min\": -10.0, \"max\": 10.0, \"group\" : \"Material 10\" }\n uniform float mask_normal_intensity9;\n \n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 1 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 2\" }\n uniform float mask_normal_offset1;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 2 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 3\" }\n uniform float mask_normal_offset2;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 3 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 4\" }\n uniform float mask_normal_offset3;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 4 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 5\" }\n uniform float mask_normal_offset4;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 5 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 6\" }\n uniform float mask_normal_offset5;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 6 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 7\" }\n uniform float mask_normal_offset6;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 7 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 8\" }\n uniform float mask_normal_offset7;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 8 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 9\" }\n uniform float mask_normal_offset8;\n \n //: param custom { \"default\": 0.1, \"label\": \"Normal from Mask 9 Offset\", \"min\": 0.0, \"max\": 1, \"group\" : \"Material 10\" }\n uniform float mask_normal_offset9;\n \n \n //: param auto Material1.channel_basecolor\n uniform sampler2D color1;\n \n //: param auto Material1.channel_roughness\n uniform sampler2D rough1;\n \n //: param auto Material1.channel_metallic\n uniform sampler2D metal1;\n \n //: param auto Material1.channel_normal\n uniform sampler2D normal1;\n \n \n //: param auto Material2.channel_basecolor\n uniform sampler2D color2;\n \n //: param auto Material2.channel_roughness\n uniform sampler2D rough2;\n \n //: param auto Material2.channel_metallic\n uniform sampler2D metal2;\n \n //: param auto Material2.channel_normal\n uniform sampler2D normal2;\n \n \n //: param auto Material3.channel_basecolor\n uniform sampler2D color3;\n \n //: param auto Material3.channel_roughness\n uniform sampler2D rough3;\n \n //: param auto Material3.channel_metallic\n uniform sampler2D metal3;\n \n //: param auto Material3.channel_normal\n uniform sampler2D normal3;\n \n \n //: param auto Material4.channel_basecolor\n uniform sampler2D color4;\n \n //: param auto Material4.channel_roughness\n uniform sampler2D rough4;\n \n //: param auto Material4.channel_metallic\n uniform sampler2D metal4;\n \n //: param auto Material4.channel_normal\n uniform sampler2D normal4;\n \n \n //: param auto Material5.channel_basecolor\n uniform sampler2D color5;\n \n //: param auto Material5.channel_roughness\n uniform sampler2D rough5;\n \n //: param auto Material5.channel_metallic\n uniform sampler2D metal5;\n \n //: param auto Material5.channel_normal\n uniform sampler2D normal5;\n \n \n //: param auto Material6.channel_basecolor\n uniform sampler2D color6;\n \n //: param auto Material6.channel_roughness\n uniform sampler2D rough6;\n \n //: param auto Material6.channel_metallic\n uniform sampler2D metal6;\n \n //: param auto Material6.channel_normal\n uniform sampler2D normal6;\n \n \n //: param auto Material7.channel_basecolor\n uniform sampler2D color7;\n \n //: param auto Material7.channel_roughness\n uniform sampler2D rough7;\n \n //: param auto Material7.channel_metallic\n uniform sampler2D metal7;\n \n //: param auto Material7.channel_normal\n uniform sampler2D normal7;\n \n \n //: param auto Material8.channel_basecolor\n uniform sampler2D color8;\n \n //: param auto Material8.channel_roughness\n uniform sampler2D rough8;\n \n //: param auto Material8.channel_metallic\n uniform sampler2D metal8;\n \n //: param auto Material8.channel_normal\n uniform sampler2D normal8;\n \n \n //: param auto Material9.channel_basecolor\n uniform sampler2D color9;\n \n //: param auto Material9.channel_roughness\n uniform sampler2D rough9;\n \n //: param auto Material9.channel_metallic\n uniform sampler2D metal9;\n \n //: param auto Material9.channel_normal\n uniform sampler2D normal9;\n \n \n //: param auto Material10.channel_basecolor\n uniform sampler2D color10;\n \n //: param auto Material10.channel_roughness\n uniform sampler2D rough10;\n \n //: param auto Material10.channel_metallic\n uniform sampler2D metal10;\n \n //: param auto Material10.channel_normal\n uniform sampler2D normal10;\n \n \n //: param auto Mask.channel_blendingmask\n uniform SamplerSparse mask;\n \n //: param auto Mask2.channel_blendingmask\n uniform SamplerSparse mask2;\n \n //: param auto Mask3.channel_blendingmask\n uniform SamplerSparse mask3;\n \n //: param auto Mask4.channel_blendingmask\n uniform SamplerSparse mask4;\n \n //: param auto Mask5.channel_blendingmask\n uniform SamplerSparse mask5;\n \n //: param auto Mask6.channel_blendingmask\n uniform SamplerSparse mask6;\n \n //: param auto Mask7.channel_blendingmask\n uniform SamplerSparse mask7;\n \n //: param auto Mask8.channel_blendingmask\n uniform SamplerSparse mask8;\n \n //: param auto Mask9.channel_blendingmask\n uniform SamplerSparse mask9;\n \n \n /////////////////////////////////////////\n ////////// BLENDING FUNCTIONS ///////////\n /////////////////////////////////////////\n \n float mixGrayscale(\n  float channelSampled[NB_MATERIALS],\n  float Masks[NB_MASKS])\n {\n  float result = channelSampled[0];\n  for (int i = 0; i < NB_MASKS; i++)\n  result = mix(result, channelSampled[i + 1], Masks[i]);\n \n  return result;\n }\n \n vec3 mixColor(\n  vec3 channelSampled[NB_MATERIALS],\n  float Masks[NB_MASKS])\n {\n  vec3 result = channelSampled[0];\n  for (int i = 0; i < NB_MASKS; i++)\n  result = mix(result, channelSampled[i + 1], Masks[i]);\n \n  return result;\n }\n \n vec3 mixNormal(\n  vec3 channelSampled[NB_MATERIALS],\n  float Masks[NB_MASKS],\n  float NormalIntensity[NB_MATERIALS])\n {\n  vec3 result = NormalIntensity[0] * channelSampled[0];\n  for (int i = 0; i < NB_MASKS; i++)\n  result = mix(result, NormalIntensity[i + 1] * channelSampled[i + 1], Masks[i]);\n \n  return result;\n }\n \n vec3 NormalFromMask(SamplerSparse Mask, float Offset, float Intensity, SparseCoord UVs, float refMask)\n {\n  vec4 results[2];\n  vec2 offsets[2] = vec2[2](\n  vec2(Offset * 0.001, 0.0),\n  vec2(0.0, Offset * 0.001)\n  );\n  textureSparseOffsets(Mask, UVs, offsets, results);\n \n  float Channel1 = results[0].r - refMask;\n  float Channel2 = results[1].r - refMask;\n \n  return vec3(-Intensity * Channel1, -Intensity * Channel2, 1.0);\n }\n \n vec3 NormalFromMasks(\n  vec3 normalFromMaskSampled[NB_MASKS],\n  float Masks[NB_MASKS])\n {\n  vec3 result = normalFromMaskSampled[0];\n  for (int i = 1; i < NB_MASKS; i++)\n  result = mix(result, normalFromMaskSampled[i], Masks[i]);\n \n  return result;\n }\n \n \n void shade(V2F inputs)\n {\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-3\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` //Global textures\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-4\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` // Get detail (ambient occlusion) and global (shadow) occlusion factors\n  float occlusion = getAO(inputs.sparse_coord) * getShadowFactor();\n  vec3 mesh_normal = normalUnpack(textureSparse(base_normal_texture, inputs.sparse_coord), base_normal_y_coeff);\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-5\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` //Materials Masks\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-6\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` float UVscale[NB_MATERIALS] = float[NB_MATERIALS](\n  u_coords1, u_coords2, u_coords3, u_coords4, u_coords5,\n  u_coords6, u_coords7, u_coords8, u_coords9, u_coords10);\n \n  float NormalIntensity[NB_MATERIALS] = float[NB_MATERIALS](\n  normal_intensity1, normal_intensity2, normal_intensity3, normal_intensity4,\n  normal_intensity5, normal_intensity6, normal_intensity7, normal_intensity8,\n  normal_intensity9, normal_intensity10);\n \n  float MaskNormalOffset[NB_MASKS] = float[NB_MASKS](\n  mask_normal_offset1, mask_normal_offset2, mask_normal_offset3,\n  mask_normal_offset4, mask_normal_offset5, mask_normal_offset6,\n  mask_normal_offset7, mask_normal_offset8, mask_normal_offset9);\n \n  float MaskNormalIntensity[NB_MASKS] = float[NB_MASKS](\n  mask_normal_intensity1, mask_normal_intensity2, mask_normal_intensity3,\n  mask_normal_intensity4, mask_normal_intensity5, mask_normal_intensity6,\n  mask_normal_intensity7, mask_normal_intensity8, mask_normal_intensity9);\n \n  float Masks[NB_MASKS] = float[NB_MASKS](\n  textureSparse(mask, inputs.sparse_coord).r, textureSparse(mask2, inputs.sparse_coord).r,\n  textureSparse(mask3, inputs.sparse_coord).r, textureSparse(mask4, inputs.sparse_coord).r,\n  textureSparse(mask5, inputs.sparse_coord).r, textureSparse(mask6, inputs.sparse_coord).r,\n  textureSparse(mask7, inputs.sparse_coord).r, textureSparse(mask8, inputs.sparse_coord).r,\n  textureSparse(mask9, inputs.sparse_coord).r);\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-7\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` //Mixing\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-8\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` float roughSampled[NB_MATERIALS] = float[NB_MATERIALS](\n  getRoughness(rough1, inputs.tex_coord*UVscale[0]),\n  getRoughness(rough2, inputs.tex_coord*UVscale[1]),\n  getRoughness(rough3, inputs.tex_coord*UVscale[2]),\n  getRoughness(rough4, inputs.tex_coord*UVscale[3]),\n  getRoughness(rough5, inputs.tex_coord*UVscale[4]),\n  getRoughness(rough6, inputs.tex_coord*UVscale[5]),\n  getRoughness(rough7, inputs.tex_coord*UVscale[6]),\n  getRoughness(rough8, inputs.tex_coord*UVscale[7]),\n  getRoughness(rough9, inputs.tex_coord*UVscale[8]),\n  getRoughness(rough10, inputs.tex_coord*UVscale[9])\n  );\n \n  float metallicSampled[NB_MATERIALS] = float[NB_MATERIALS](\n  getMetallic(metal1, inputs.tex_coord*UVscale[0]),\n  getMetallic(metal2, inputs.tex_coord*UVscale[1]),\n  getMetallic(metal3, inputs.tex_coord*UVscale[2]),\n  getMetallic(metal4, inputs.tex_coord*UVscale[3]),\n  getMetallic(metal5, inputs.tex_coord*UVscale[4]),\n  getMetallic(metal6, inputs.tex_coord*UVscale[5]),\n  getMetallic(metal7, inputs.tex_coord*UVscale[6]),\n  getMetallic(metal8, inputs.tex_coord*UVscale[7]),\n  getMetallic(metal9, inputs.tex_coord*UVscale[8]),\n  getMetallic(metal10, inputs.tex_coord*UVscale[9])\n  );\n \n  vec3 basecolorSampled[NB_MATERIALS] = vec3[NB_MATERIALS](\n  getBaseColor(color1, inputs.tex_coord*UVscale[0]),\n  getBaseColor(color2, inputs.tex_coord*UVscale[1]),\n  getBaseColor(color3, inputs.tex_coord*UVscale[2]),\n  getBaseColor(color4, inputs.tex_coord*UVscale[3]),\n  getBaseColor(color5, inputs.tex_coord*UVscale[4]),\n  getBaseColor(color6, inputs.tex_coord*UVscale[5]),\n  getBaseColor(color7, inputs.tex_coord*UVscale[6]),\n  getBaseColor(color8, inputs.tex_coord*UVscale[7]),\n  getBaseColor(color9, inputs.tex_coord*UVscale[8]),\n  getBaseColor(color10, inputs.tex_coord*UVscale[9])\n  );\n \n  vec3 normalSampled[NB_MATERIALS] = vec3[NB_MATERIALS](\n  normalUnpack(texture(normal1, inputs.tex_coord*UVscale[0])),\n  normalUnpack(texture(normal2, inputs.tex_coord*UVscale[1])),\n  normalUnpack(texture(normal3, inputs.tex_coord*UVscale[2])),\n  normalUnpack(texture(normal4, inputs.tex_coord*UVscale[3])),\n  normalUnpack(texture(normal5, inputs.tex_coord*UVscale[4])),\n  normalUnpack(texture(normal6, inputs.tex_coord*UVscale[5])),\n  normalUnpack(texture(normal7, inputs.tex_coord*UVscale[6])),\n  normalUnpack(texture(normal8, inputs.tex_coord*UVscale[7])),\n  normalUnpack(texture(normal9, inputs.tex_coord*UVscale[8])),\n  normalUnpack(texture(normal10, inputs.tex_coord*UVscale[9]))\n  );\n \n  float roughness = mixGrayscale(roughSampled, Masks);\n  float metallic = mixGrayscale(metallicSampled, Masks);\n  vec3 basecolor = mixColor(basecolorSampled, Masks);\n  vec3 diffColor = generateDiffuseColor(basecolor, metallic);\n  vec3 specColor = generateSpecularColor(basecolor, metallic);\n  float specOcclusion = specularOcclusionCorrection(occlusion, metallic, roughness);\n \n  //Normal channel\n  vec3 normal = mixNormal(normalSampled, Masks, NormalIntensity);\n  normal = normalize( vec3(normal.xy + mesh_normal.xy, mesh_normal.z) ); //UDN combine method\n \n  vec3 finalNormal = normal;\n  vec3 normalMask = vec3(0.0, 0.0, 1.0);\n \n  if( UseNormalFromMask )\n  {\n  vec3 normalFromMaskSampled[NB_MASKS] = vec3[NB_MASKS](\n  NormalFromMask(mask , MaskNormalOffset[0], MaskNormalIntensity[0], inputs.sparse_coord, Masks[0]),\n  NormalFromMask(mask2, MaskNormalOffset[1], MaskNormalIntensity[1], inputs.sparse_coord, Masks[1]),\n  NormalFromMask(mask3, MaskNormalOffset[2], MaskNormalIntensity[2], inputs.sparse_coord, Masks[2]),\n  NormalFromMask(mask4, MaskNormalOffset[3], MaskNormalIntensity[3], inputs.sparse_coord, Masks[3]),\n  NormalFromMask(mask5, MaskNormalOffset[4], MaskNormalIntensity[4], inputs.sparse_coord, Masks[4]),\n  NormalFromMask(mask6, MaskNormalOffset[5], MaskNormalIntensity[5], inputs.sparse_coord, Masks[5]),\n  NormalFromMask(mask7, MaskNormalOffset[6], MaskNormalIntensity[6], inputs.sparse_coord, Masks[6]),\n  NormalFromMask(mask8, MaskNormalOffset[7], MaskNormalIntensity[7], inputs.sparse_coord, Masks[7]),\n  NormalFromMask(mask9, MaskNormalOffset[8], MaskNormalIntensity[8], inputs.sparse_coord, Masks[8])\n  );\n \n  normalMask = NormalFromMasks(normalFromMaskSampled, Masks);\n  finalNormal = normalize( vec3(finalNormal.xy + normalMask.xy, finalNormal.z) ); //UDN combine method\n  }\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-9\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` //Final\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#section-10\"\n      }}>{` `}</a></p>\n    <hr></hr>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{` //Debug mode display result of combined channels or Masks\n  if( !DebugMode ) {\n  vec3 finalNormalWorldSpace = normalize(\n  finalNormal.x * inputs.tangent +\n  finalNormal.y * inputs.bitangent +\n  finalNormal.z * inputs.normal);\n  // Feed parameters for a physically based BRDF integration.\n  LocalVectors vectors = computeLocalFrame(inputs, finalNormalWorldSpace, 0.0);\n  emissiveColorOutput(pbrComputeEmissive(emissive_tex, inputs.sparse_coord));\n  diffuseShadingOutput(occlusion * pbrComputeDiffuse(vectors.normal, diffColor));\n  specularShadingOutput(specOcclusion * pbrComputeSpecular(vectors, specColor, roughness));\n  } else {\n  vec3 result;\n \n  //BaseColor combined\n  if( DebugChannel == 0 ) {\n  result = basecolor;\n  }\n \n  //Roughness combined\n  else if( DebugChannel == 1 ) {\n  result = vec3(roughness);\n  }\n \n  //Metallic combined\n  else if( DebugChannel == 2 ) {\n  result = vec3(metallic);\n  }\n \n  //Normal combined\n  else if( DebugChannel == 3) {\n  normal = 0.5 * normal + vec3(0.5);\n  result = sRGB2linear(normal);\n  }\n \n  //Combined masks as Normal\n  else if( DebugChannel == 4 ) {\n  normalMask = 0.5 * normalMask + vec3(0.5);\n  result = sRGB2linear(normalMask);\n  }\n \n  //Final Normal\n  else if( DebugChannel == 5 ) {\n  finalNormal = 0.5 * finalNormal + vec3(0.5);\n  result = sRGB2linear(finalNormal);\n  }\n \n  //Mask(s)\n  else {\n  result = vec3(sRGB2linear(Masks[DebugChannel - 6]));\n  }\n \n  diffuseShadingOutput(result);\n  }\n }\n \n \n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutPropertiesLoose","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}