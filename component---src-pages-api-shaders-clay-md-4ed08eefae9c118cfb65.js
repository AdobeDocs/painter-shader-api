"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[149],{94527:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return d},default:function(){return p}});var l=a(87462),t=a(63366),r=(a(15007),a(64983)),o=a(91515),m=["components"],d={},s={_frontmatter:d},c=o.Z;function p(e){var n=e.components,a=(0,t.Z)(e,m);return(0,r.mdx)(c,(0,l.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-0"}," ")),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-1"}," ")),(0,r.mdx)("h1",{id:"substance-3d-painter-clay-shader"},"Substance 3D Painter Clay shader"),(0,r.mdx)("p",null,"Import from libraries."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"},'import lib-vectors.glsl\n \n \n //: param custom { "default": [0.3, 0.07, 0.05], "label": "Color", "widget": "color" }\n uniform vec3 clayColor;\n \n //: param custom { "default": 0.25, "label": "Glossiness", "min": 0.001, "max": 1.0 }\n uniform float clayGloss;\n \n //: param custom { "default": [0.3, 0.3, 0.3], "label": "Dirt Color", "widget": "color" }\n uniform vec3 dirtColor;\n \n //: param custom { "default": 0.25, "label": "Dirt Amount", "min": 0.0, "max": 1.0 }\n uniform float clayDirt;\n \n //: param custom { "default": 0.1, "label": "Ambient", "min": 0.0, "max": 1.0 }\n uniform float ambient;\n')),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-2"}," ")),(0,r.mdx)("p",null,"Entry point of the shader."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"},"void shade(V2F inputs)\n {\n")),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-3"}," ")),(0,r.mdx)("p",null,"We generate local world space vectors"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"}," LocalVectors vectors = computeLocalFrame(inputs);\n")),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-4"}," ")),(0,r.mdx)("p",null,"Simulate camera aligned lighting"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"}," float NdV = max(0.0, dot(vectors.normal, vectors.eye));\n")),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-5"}," ")),(0,r.mdx)("p",null,"We generate main color from screen-space curvature"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"}," vec3 dNdx = dFdx(vectors.normal);\n  vec3 dNdy = dFdy(vectors.normal);\n  vec3 xneg = vectors.normal - dNdx;\n  vec3 xpos = vectors.normal + dNdx;\n  vec3 yneg = vectors.normal - dNdy;\n  vec3 ypos = vectors.normal + dNdy;\n  float depth = length(inputs.position);\n  float curvature = 2.0 * (cross(xneg, xpos).y - cross(yneg, ypos).x) / depth;\n \n  float dirt = clamp(-4.0 * curvature, 0.0, 1.0) * clayDirt;\n  vec3 diffuse = mix(clayColor, dirtColor, dirt);\n  float specular = clayGloss * (1.0 - dirt) * (0.5 * curvature + 0.5);\n")),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-6"}," ")),(0,r.mdx)("p",null,"Ambient and diffuse contribution"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"}," diffuseShadingOutput((ambient + NdV) * diffuse);\n")),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"#section-7"}," ")),(0,r.mdx)("p",null,"Specular contribution"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-glsl"}," specularShadingOutput(vec3(specular * pow(NdV, 64.0 * clayGloss)));\n }\n \n \n")))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-api-shaders-clay-md-4ed08eefae9c118cfb65.js.map