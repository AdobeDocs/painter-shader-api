{"version":3,"file":"component---src-pages-api-shaders-toon-md-21b76be4f9390856007c.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/api/shaders/toon.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/painter-shader-api/painter-shader-api/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"basic-toon-shader\"\n    }}>{`Basic toon shader`}</h1>\n    <hr></hr>\n    <p>{`Import from libraries.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`import lib-sampler.glsl\n`}</code></pre>\n    <p>{`We define the global light position`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`const vec3 light_pos = vec3(10.0, 10.0, 10.0);\n`}</code></pre>\n    <p>{`We `}<strong parentName=\"p\">{`bind`}</strong>{` the auto param world eye position to our uniform `}<strong parentName=\"p\">{`camera_pos`}</strong>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param auto world_eye_position\n uniform vec3 camera_pos;\n`}</code></pre>\n    <p>{`We `}<strong parentName=\"p\">{`bind`}</strong>{` the document's channel `}<strong parentName=\"p\">{`base color`}</strong>{` to our uniform `}<strong parentName=\"p\">{`basecolor_tex`}</strong>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param auto channel_basecolor\n uniform SamplerSparse basecolor_tex;\n`}</code></pre>\n    <p>{`We `}<strong parentName=\"p\">{`bind`}</strong>{` the `}<strong parentName=\"p\">{`mesh curvature`}</strong>{` to our uniform `}<strong parentName=\"p\">{`curvature_tex`}</strong>{`.\nIf no curvature is available, transparent texture is provided.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param auto texture_curvature\n uniform SamplerSparse curvature_tex;\n`}</code></pre>\n    <p>{`We define a new custom tweak for this shader, along with its default value.\nThis one is used to tweak the thickness of outline, when shadowed.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param custom {\n //:  \"default\": 0.4,\n //:   \"min\": 0.0,\n //:   \"max\": 1.0,\n //:   \"label\": \"Unlit outline thickness\"\n //: }\n uniform float unlit_outline_thickness;\n`}</code></pre>\n    <p>{`We define a new custom tweak for this shader, along with its default value.\nThis one is used to tweak the thickness of outline, when lit.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param custom {\n //:   \"default\": 0.1,\n //:   \"min\": 0.0,\n //:   \"max\": 1.0,\n //:   \"label\": \"Lit outline thickness\"\n //: }\n uniform float lit_outline_thickness;\n`}</code></pre>\n    <p>{`Whether we prefer using the curvature or not.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`//: param custom {\n //:   \"default\": false,\n //:   \"label\": \"Use curvature\"\n //: }\n uniform bool use_curvature;\n`}</code></pre>\n    <p>{`Entry point of the shader.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`void shade(V2F inputs)\n {\n`}</code></pre>\n    <p>{`We compute a few useful values.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`  vec3 V = normalize(camera_pos - inputs.position);\n   vec3 N = normalize(inputs.normal);\n   vec3 L = normalize(light_pos - inputs.position);\n   float NdV = dot(N, V);\n   float NdL = max(0.0, dot(N, L));\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Priority`}</strong>{` is to performs the `}<strong parentName=\"p\">{`outline detection`}</strong>{`.\nAllow the user to choose whether he prefers using the curvature map\nfor outline detection or not.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`  if (use_curvature) {\n     float curv = textureSparse(curvature_tex, inputs.sparse_coord).r;\n     NdV = 1.0 - curv;\n   }\n`}</code></pre>\n    <p>{`If outline condition is reach, exit with black color.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`  if (NdV < mix(unlit_outline_thickness, lit_outline_thickness, NdL)) {\n     return;\n   }\n`}</code></pre>\n    <p>{`Here, we perform a 4 steps discretization of color.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`  vec3 color = getBaseColor(basecolor_tex, inputs.sparse_coord);\n   if (NdL > 0.75) {\n     color = color;\n   } else if (NdL > 0.5) {\n     color = color * 0.5;\n   } else if (NdL > 0.1) {\n     color = color * 0.1;\n   }\n   else\n`}</code></pre>\n    <p>{`Fallback is black.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-glsl\"\n      }}>{`    color = vec3(0.0);\n \n   diffuseShadingOutput(color);\n }\n \n \n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutPropertiesLoose","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}